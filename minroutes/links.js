"use strict";const express=require("express"),colors=require("colors"),request=require("request"),ws=require("website-info"),urlExists=require("url-exists"),router=express.Router();router.get("/:sitename",function(e,r){var t="",s=[],a=e.params.sitename;a=a.replace(/\s/g,""),a=a.replace(/ /g,"");var o="http://"+a+".com"||"https://"+a+".com",c="",i="";if("("===a.charAt(0)){for(var h=1;h<a.length-1;h++)c+=a.charAt(h);for(var n=0;n<c.length;n++)"~"!=c.charAt(n)&&(i+=c.charAt(n)),"~"==c.charAt(n)&&(i+="/");i.length>0&&(c=i),o="http://"+c||"https://"+c}console.log("scraping "+o.cyan+" for links "),ws(o,function(e,a){e&&console.error(e),request(o,function(e,c,i){if(!e&&200==c.statusCode){i=i.replace(/\s/g,""),i=i.replace(/ /g,""),i=i.toLowerCase();for(var h=0;h<i.length;h++)if("h"==i.charAt(h)&&"r"==i.charAt(h+1)&&"e"==i.charAt(h+2)&&"f"==i.charAt(h+3)&&'"'==i.charAt(h+5))for(var n=h+6,l=n;l<i.length;l++){if('"'==i.charAt(l)||"'"==i.charAt(l)){t.length>=1&&s.push(t),t="";break}t+=i.charAt(l)}for(var h=0;h<s.length;h++)(""==s[h]||s[h].length<1)&&s[h].splice(h,1);var u={siteUrl:o,siteInfo:a,siteLinksNumber:s.length,siteLinks:s,message:"Website Exists"};r.send(u)}})})}),module.exports=router;