"use strict";const express=require("express"),colors=require("colors"),request=require("request"),ws=require("website-info"),urlExists=require("url-exists"),router=express.Router();router.get("/:tagname/:sitename",function(r,e){var t="",s=[],a=r.params.tagname,c=r.params.sitename;c=c.replace(/\s/g,""),c=c.replace(/ /g,"");var h="http://"+c+".com"||"https://"+c+".com",o="",i="";if("("===c.charAt(0)){for(var n=1;n<c.length-1;n++)o+=c.charAt(n);for(var l=0;l<o.length;l++)"~"!=o.charAt(l)&&(i+=o.charAt(l)),"~"==o.charAt(l)&&(i+="/");i.length>0&&(o=i),h="http://"+o||"https://"+o}ws(h,function(r,c){r&&console.error(r),request(h,function(r,o,i){if(!r&&200==o.statusCode){i=i.replace(/\s/g,""),i=i.replace(/ /g,""),i=i.toLowerCase();for(var n=0;n<i.length;n++){if("id"===a&&"i"==i.charAt(n)&&"d"==i.charAt(n+1)&&"="==i.charAt(n+2)&&'"'==i.charAt(n+3))for(var l=n+4,g=l;g<i.length;g++){if('"'==i.charAt(g)||"'"==i.charAt(g)){t.length>=1&&s.push(t),t="";break}t+=i.charAt(g)}if("class"===a&&"c"==i.charAt(n)&&"l"==i.charAt(n+1)&&"a"==i.charAt(n+2)&&"s"==i.charAt(n+3)&&"s"==i.charAt(n+4)&&'"'==i.charAt(n+6))for(var l=n+7,g=l;g<i.length;g++){if('"'==i.charAt(g)||"'"==i.charAt(g)){t.length>=1&&s.push(t),t="";break}t+=i.charAt(g)}}for(var n=0;n<s.length;n++)(""==s[n]||s[n].length<1)&&s[n].splice(n,1);var u={};"id"===a&&(console.log("scraping "+h.cyan+" id anchors "),u={siteUrl:h,siteInfo:c,idTagNumber:s.length,idTags:s,message:"Website Exists"}),"class"===a&&(console.log("scraping "+h.cyan+" class anchors "),u={siteUrl:h,siteInfo:c,classTagNumber:s.length,classTags:s,message:"Website Exists"}),e.send(u)}})})}),module.exports=router;